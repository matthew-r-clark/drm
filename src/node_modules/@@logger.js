import getConfig from 'next/config';
import { Browser } from '@logtail/js';
import { Logtail as Node } from '@logtail/node';
import { prop } from 'ramda';

const { publicRuntimeConfig } = getConfig();
const logtailSourceToken = prop('logtailSourceToken', publicRuntimeConfig);

let Logtail;
if (typeof window != 'undefined' && window.document) {
  console.log('logging from browser');
  Logtail = Browser;
} else {
  console.log('logging from server');
  Logtail = Node;
}

const logtail = new Logtail(logtailSourceToken);
export default logtail;