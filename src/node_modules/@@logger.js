import getConfig from 'next/config';
import { Node, Browser } from '@logtail/js';
import { prop } from 'ramda';

const { publicRuntimeConfig } = getConfig();
const logtailSourceToken = prop('logtailSourceToken', publicRuntimeConfig);

function getLogger() {
  let Logtail;
  if (typeof window != 'undefined' && window.document) {
    console.log('logging from browser');
    Logtail = Browser;
  } else {
    console.log('logging from server');
    Logtail = Node;
  }
  const logtail = new Logtail(logtailSourceToken);
  return logtail;
}


export default getLogger;