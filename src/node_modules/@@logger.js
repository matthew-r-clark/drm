import getConfig from 'next/config';
import { Node, Browser } from '@logtail/js';
import { path } from 'ramda';

const { serverRuntimeConfig } = getConfig();
const logtailSourceToken = path(['logtail', 'sourceToken'], serverRuntimeConfig);

let Logtail;
if (typeof window != 'undefined' && window.document) {
  Logtail = Browser;
} else {
  Logtail = Node;
}

const logtail = new Logtail(logtailSourceToken);
export default logtail;