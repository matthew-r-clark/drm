import { curry } from 'ramda';

const router = curry((api, req, res) => {
  const {method, url} = req;
  if (api[method]) {
    switch (method) {
      case 'GET':
        api.get(req, res);
        break;
      case 'PUT':
        api.put(req, res);
        break;
      case 'POST':
        api.post(req, res);
        break;
      case 'DELETE':
        api.delete(req, res);
        break;
    }
  } else {
    res.status(405).send(`${method} not allowed on ${url}`);
  }
});

export default router;